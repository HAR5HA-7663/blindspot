<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blindspot</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header (always visible) -->
    <header class="popup-header">
      <div class="logo">
        <img src="../blindspot-logo.png" alt="Blindspot" class="logo-icon-img">
        <span class="logo-text">Blindspot</span>
      </div>
      <p class="tagline">Catch your cognitive biases</p>
    </header>

    <!-- ONBOARDING VIEW -->
    <div id="onboarding-view" class="view">
      <div class="onboarding-content">
        <!-- Step 1: Welcome -->
        <div class="step" id="step-1">
          <h2>Welcome to Blindspot</h2>
          <p class="step-desc">Let's set you up in 2 minutes. We'll personalize Blindspot to understand how YOU think.</p>

          <div class="setup-preview">
            <div class="preview-item">
              <span class="preview-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M19.79 14.93a7.575 7.575 0 0 1-7.6 1.87l-4.71 4.7c-.34.35-1.01.56-1.49.49l-2.18-.3c-.72-.1-1.39-.78-1.5-1.5l-.3-2.18c-.07-.48.16-1.15.49-1.49l4.7-4.7c-.8-2.6-.18-5.55 1.88-7.6 2.95-2.95 7.74-2.95 10.7 0 2.96 2.95 2.96 7.76.01 10.71Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M6.89 17.49l2.3 2.3" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.5 11a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
              <span>Connect your Claude API</span>
            </div>
            <div class="preview-item">
              <span class="preview-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12.16 10.87c-.1-.01-.22-.01-.33 0a4.42 4.42 0 0 1-4.27-4.43C7.56 3.99 9.54 2 12 2a4.435 4.435 0 0 1 .16 8.87Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M7.16 14.56c-2.42 1.62-2.42 4.26 0 5.87 2.75 1.84 7.26 1.84 10.01 0 2.42-1.62 2.42-4.26 0-5.87-2.74-1.83-7.25-1.83-10.01 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
              <span>Tell us about yourself</span>
            </div>
            <div class="preview-item">
              <span class="preview-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 12c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 12a6 6 0 1 1-6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 2l-5 5M17 2h5v5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="1" fill="currentColor"/></svg></span>
              <span>Get personalized analysis</span>
            </div>
          </div>

          <button class="btn btn-primary" id="btn-get-started">Get Started</button>
        </div>

        <!-- Step 2: API Key -->
        <div class="step hidden" id="step-2">
          <h2>Connect Claude API</h2>
          <p class="step-desc">Enter your Anthropic API key to enable bias analysis.</p>

          <div class="form-group">
            <label for="api-key">API Key</label>
            <div class="input-with-toggle">
              <input type="password" id="api-key" placeholder="sk-ant-api03-...">
              <button type="button" class="toggle-btn" id="toggle-api-key"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M15.58 12c0 1.98-1.6 3.58-3.58 3.58S8.42 13.98 8.42 12s1.6-3.58 3.58-3.58 3.58 1.6 3.58 3.58Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 20.27c3.53 0 6.82-2.08 9.11-5.68.9-1.41.9-3.78 0-5.19-2.29-3.6-5.58-5.68-9.11-5.68-3.53 0-6.82 2.08-9.11 5.68-.9 1.41-.9 3.78 0 5.19 2.29 3.6 5.58 5.68 9.11 5.68Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
            </div>
            <p class="hint">Get your key at <a href="https://console.anthropic.com/" target="_blank">console.anthropic.com</a></p>
          </div>

          <p class="error-text hidden" id="api-error"></p>

          <div class="step-buttons">
            <button class="btn btn-secondary" id="btn-back-to-1">Back</button>
            <button class="btn btn-primary" id="btn-validate-api">Continue</button>
          </div>
        </div>

        <!-- Step 3: Personal Questions -->
        <div class="step hidden" id="step-3">
          <h2>Tell Us About You</h2>
          <p class="step-desc">This helps Blindspot give you personalized insights.</p>

          <div class="form-group">
            <label for="user-name">What should we call you?</label>
            <input type="text" id="user-name" placeholder="e.g., Alex">
          </div>

          <div class="form-group">
            <label for="user-role">What's your role/profession?</label>
            <input type="text" id="user-role" placeholder="e.g., Software Engineer, Founder, Student">
          </div>

          <div class="form-group">
            <label for="user-decisions">What kinds of decisions do you make often?</label>
            <textarea id="user-decisions" rows="2" placeholder="e.g., Product priorities, hiring, investments, career choices"></textarea>
          </div>

          <div class="step-buttons">
            <button class="btn btn-secondary" id="btn-back-to-2">Back</button>
            <button class="btn btn-primary" id="btn-to-step-4">Continue</button>
          </div>
        </div>

        <!-- Step 4: Thinking Patterns -->
        <div class="step hidden" id="step-4">
          <h2>Your Thinking Patterns</h2>
          <p class="step-desc">Be honest - this helps us catch YOUR blind spots.</p>

          <div class="form-group">
            <label>Which biases do you think you're prone to? (select all that apply)</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" value="sunk_cost">
                <span>Sunk Cost - "I've invested too much to quit"</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" value="confirmation">
                <span>Confirmation - Only seeing evidence that agrees with me</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" value="planning">
                <span>Planning Fallacy - Underestimating how long things take</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" value="emotional">
                <span>Emotional Reasoning - Letting feelings drive decisions</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" value="bandwagon">
                <span>Bandwagon - Doing things because others do</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" value="loss_aversion">
                <span>Loss Aversion - Fear of losing more than desire to gain</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label for="user-weaknesses">Any other decision-making weaknesses you've noticed?</label>
            <textarea id="user-weaknesses" rows="2" placeholder="e.g., I rush decisions when stressed, I avoid conflict..."></textarea>
          </div>

          <div class="step-buttons">
            <button class="btn btn-secondary" id="btn-back-to-3">Back</button>
            <button class="btn btn-primary" id="btn-to-step-5">Continue</button>
          </div>
        </div>

        <!-- Step 5: Goals -->
        <div class="step hidden" id="step-5">
          <h2>Your Goals</h2>
          <p class="step-desc">What do you want to improve about your thinking?</p>

          <div class="form-group">
            <label for="user-goals">What's most important to you right now?</label>
            <textarea id="user-goals" rows="3" placeholder="e.g., Making better career decisions, avoiding impulse purchases, being more rational in relationships..."></textarea>
          </div>

          <div class="form-group">
            <label for="user-style">How do you prefer feedback?</label>
            <select id="user-style">
              <option value="direct">Direct and blunt - tell it like it is</option>
              <option value="supportive">Supportive but honest - gentle nudges</option>
              <option value="analytical">Analytical - focus on logic and evidence</option>
              <option value="curious">Curious - ask me questions to make me think</option>
            </select>
          </div>

          <div class="step-buttons">
            <button class="btn btn-secondary" id="btn-back-to-4">Back</button>
            <button class="btn btn-primary" id="btn-complete">Complete Setup</button>
          </div>
        </div>

        <!-- Step 6: Complete -->
        <div class="step hidden" id="step-6">
          <div class="success-icon"><svg width="32" height="32" viewBox="0 0 24 24" fill="none"><path d="M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="m7.75 12 2.83 2.83 5.67-5.66" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <h2>You're All Set!</h2>
          <p class="step-desc">Blindspot is now personalized to you.</p>

          <div class="how-to-use">
            <h3>How to use:</h3>
            <ol>
              <li>Select text on any webpage</li>
              <li>Right-click → <strong>"Analyze with Blindspot"</strong></li>
              <li>Or use <strong>"Analyze with Screenshot"</strong> for more context</li>
            </ol>
          </div>

          <button class="btn btn-primary" id="btn-start-using">Start Using Blindspot</button>
        </div>
      </div>

      <!-- Progress dots -->
      <div class="progress-dots" id="progress-dots">
        <span class="dot active" data-step="1"></span>
        <span class="dot" data-step="2"></span>
        <span class="dot" data-step="3"></span>
        <span class="dot" data-step="4"></span>
        <span class="dot" data-step="5"></span>
      </div>
    </div>

    <!-- MAIN VIEW (after onboarding) -->
    <div id="main-view" class="view hidden">
      <main class="popup-main">
        <!-- Stats Cards -->
        <section class="stats-section" id="stats-section">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="stat-analyses">0</div>
              <div class="stat-label">Analyses</div>
            </div>
            <div class="stat-card stat-highlight">
              <div class="stat-value" id="stat-biases">0</div>
              <div class="stat-label">Biases Caught</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-streak">0</div>
              <div class="stat-label">Day Streak</div>
            </div>
          </div>
        </section>

        <!-- Tab Navigation -->
        <div class="tab-nav">
          <button class="tab-btn active" data-tab="analyze">Analyze</button>
          <button class="tab-btn" data-tab="history">History</button>
          <button class="tab-btn" data-tab="intervene">Intervene</button>
        </div>

        <!-- Analyze Tab -->
        <div class="tab-content active" id="tab-analyze">
          <!-- Quick Analyze Section -->
          <section class="section">
            <label class="label" for="quick-text">Quick Analysis</label>
            <textarea
              id="quick-text"
              placeholder="Paste your reasoning here to analyze for biases..."
              rows="4"
            ></textarea>
            <button id="analyze-btn" class="btn btn-primary">
              <span id="analyze-text">Analyze</span>
              <span id="analyze-loading" class="hidden">Analyzing...</span>
            </button>
          </section>

          <!-- Results Section -->
          <section class="section hidden" id="results-section">
            <div class="results-header">
              <span class="results-title">Results</span>
              <span class="quality-badge" id="quality-badge"></span>
            </div>
            <div id="results-content"></div>
          </section>

          <!-- How to Use -->
          <section class="section how-to">
            <h3>How to Use</h3>
            <ol>
              <li>Select text on any webpage</li>
              <li>Right-click → "Analyze with Blindspot"</li>
              <li>Or "Analyze with Screenshot" for context</li>
            </ol>
          </section>
        </div>

        <!-- History Tab -->
        <div class="tab-content" id="tab-history">
          <div class="history-header">
            <span class="history-title">Decision History</span>
            <button class="btn-icon btn-danger" id="btn-clear-history" title="Clear History"><svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 5.98c-3.33-.33-6.68-.5-10.02-.5-1.98 0-3.96.1-5.94.3L3 5.98" stroke="#ef4444" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.5 4.97l.22-1.31C8.88 2.71 9 2 10.69 2h2.62c1.69 0 1.82.75 1.97 1.67l.22 1.3" stroke="#ef4444" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M18.85 9.14l-.65 10.07C18.09 20.78 18 22 15.21 22H8.79C6 22 5.91 20.78 5.8 19.21L5.15 9.14" stroke="#ef4444" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
          </div>
          <div id="history-list">
            <div class="history-empty">
              <span class="empty-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M21 7v10c0 3-1.5 5-5 5H8c-3.5 0-5-2-5-5V7c0-3 1.5-5 5-5h8c3.5 0 5 2 5 5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.5 4.5v2c0 1.1.9 2 2 2h2M8 13h4M8 17h8" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
              <p>No analyses yet</p>
              <p class="hint">Start analyzing to build your history</p>
            </div>
          </div>
        </div>

        <!-- Intervene Tab -->
        <div class="tab-content" id="tab-intervene">
          <div class="intervene-header">
            <span class="intervene-title">Intervention Settings</span>
          </div>

          <!-- Master Toggle -->
          <div class="setting-card setting-master">
            <div class="setting-info">
              <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M10.49 2.23l-5.5 2.16c-.98.39-1.78 1.56-1.78 2.61v6.77c0 1.02.65 2.36 1.44 2.98l5.5 4.31c1.18.93 3.12.93 4.3 0l5.5-4.31c.79-.62 1.44-1.96 1.44-2.98V7c0-1.06-.8-2.22-1.78-2.61l-5.5-2.16c-.91-.36-2.2-.36-3.12 0Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="m9.05 11.87 1.61 1.61 4.3-4.31" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
              <div class="setting-text">
                <span class="setting-name">Proactive Interventions</span>
                <span class="setting-desc">Get nudged before making biased decisions</span>
              </div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="setting-interventions-enabled" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <!-- Individual Settings -->
          <div class="settings-group" id="intervention-settings-group">
            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M8.81 2L5.19 5.63M15.19 2l3.62 3.63" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 7.85c0-1.85.99-2 2.22-2h15.56c1.23 0 2.22.15 2.22 2 0 2.15-.99 2-2.22 2H4.22C2.99 9.85 2 10 2 7.85Z" stroke="currentColor" stroke-width="1.5"/><path d="M9.76 14v3.55M14.36 14v3.55" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M3.5 10l1.41 8.64C5.23 20.58 6 22 8.86 22h6.03c3.11 0 3.57-1.36 3.93-3.24L20.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Shopping & Checkout</span>
                  <span class="setting-desc">Amazon, eBay, cart pages</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-shopping" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M15 22H9c-4 0-5-1-5-5V7c0-4 1-5 5-5h6c4 0 5 1 5 5v10c0 4-1 5-5 5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 5.5h-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 18.1a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Social Media</span>
                  <span class="setting-desc">Twitter, Instagram, TikTok, Reddit</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-social" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M17.98 10.79v-.9c0-3.07-2.64-5.56-5.89-5.56-3.21 0-5.82 2.44-5.89 5.46h-.28C4.29 9.79 2.9 11.18 2.9 12.91c0 1.73 1.39 3.12 3.1 3.12h11.98c1.71 0 3.1-1.4 3.1-3.12a3.08 3.08 0 0 0-3.1-3.12Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.5 16.03v1.92c0 1.11.9 2.01 2.01 2.01h8.98c1.11 0 2.01-.9 2.01-2.01v-1.92" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 13h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Food Delivery</span>
                  <span class="setting-desc">DoorDash, UberEats, Grubhub</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-food" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M2 8.5h20M6 16.5h2M10.5 16.5h4" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M6.44 3.5h11.11c3.56 0 4.45.88 4.45 4.39v8.22c0 3.51-.89 4.39-4.44 4.39H6.44c-3.55.01-4.44-.87-4.44-4.38V7.89c0-3.51.89-4.39 4.44-4.39Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Subscriptions</span>
                  <span class="setting-desc">Pricing & signup pages</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-subscription" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 9v5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M12.0001 21.41H5.94005C2.47005 21.41 1.02005 18.93 2.70005 15.9L5.82006 10.28L8.76005 5.00003C10.54 1.79003 13.46 1.79003 15.24 5.00003L18.18 10.29L21.3 15.91C22.98 18.94 21.52 21.42 18.06 21.42H12.0001V21.41Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M11.995 17h.009" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Urgency Tactics</span>
                  <span class="setting-desc">Countdown timers, "limited time"</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-urgency" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="setting-card">
              <div class="setting-info">
                <span class="setting-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M7.99 22h8c5 0 6-2 6.48-4.46l.98-6c.62-3.12-.42-5.54-4.46-5.54H5c-4.03 0-5.07 2.42-4.46 5.54l.98 6C1.99 20 2.99 22 7.99 22Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 6V5.2C8 3.43 8 2 11.2 2h1.6C16 2 16 3.43 16 5.2V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 13v.76c0 1.02-.01 1.84-2 1.84s-2-.83-2-1.85V13c0-1 0-1 1-1h2c1 0 1 0 1 1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M21.65 11A19.478 19.478 0 0 1 14 13.77M2.62 11.27A18.853 18.853 0 0 0 10 13.76" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
                <div class="setting-text">
                  <span class="setting-name">Career & Finance</span>
                  <span class="setting-desc">Job sites, investment platforms</span>
                </div>
              </div>
              <label class="toggle">
                <input type="checkbox" id="setting-career-finance" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <!-- Keyboard Shortcut Info -->
          <div class="shortcut-info">
            <span class="shortcut-label">Manual Trigger:</span>
            <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>B</kbd>
          </div>

          <!-- Patterns Section (moved here) -->
          <section class="section" id="insights-section">
            <div class="insights-header">
              <span class="insights-title"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="vertical-align: middle; margin-right: 6px;"><path d="M2 22h20" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.75 4v18h4.5V4c0-1.1-.45-2-1.8-2h-.9c-1.35 0-1.8.9-1.8 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 10v12h4V10c0-1.1-.4-2-1.6-2h-.8C3.4 8 3 8.9 3 10ZM17 15v7h4v-7c0-1.1-.4-2-1.6-2h-.8c-1.2 0-1.6.9-1.6 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Your Patterns</span>
              <span class="insights-count" id="insights-count"></span>
            </div>
            <div id="insights-content">
              <div class="insights-loading">Loading insights...</div>
            </div>
          </section>
        </div>

        <!-- Settings -->
        <section class="section settings">
          <button class="btn btn-secondary btn-small" id="btn-edit-profile">
            Edit Profile
          </button>
          <button class="btn btn-secondary btn-small" id="btn-reset">
            Reset
          </button>
        </section>
      </main>
    </div>

    <!-- EDIT PROFILE VIEW -->
    <div id="edit-profile-view" class="view hidden">
      <div class="edit-profile-content">
        <h2>Edit Your Profile</h2>
        <p class="step-desc">Update your profile to improve personalization.</p>

        <div class="form-group">
          <label for="edit-profile-text">Your Profile (Markdown)</label>
          <textarea id="edit-profile-text" rows="12" class="monospace"></textarea>
        </div>

        <div class="step-buttons">
          <button class="btn btn-secondary" id="btn-cancel-edit">Cancel</button>
          <button class="btn btn-primary" id="btn-save-profile">Save Changes</button>
        </div>
      </div>
    </div>

    <footer class="popup-footer">
      <span>Aurora Hackathon 2026</span>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
